<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>The deal.II Library: CompressedSparsityPattern::Line Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link rel="SHORTCUT ICON" href="http://www.dealii.org/deal.ico"></link>
<meta name="author" content="The deal.II Authors <authors@dealii.org>"></meta>
<meta name="copyright" content="Copyright (C) 1998 - 2014 by the deal.II authors"></meta>
<meta name="deal.II-version" content="8.1.0"></meta>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo200.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">
   &#160;<span id="projectnumber">Reference documentation for deal.II version 8.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="classCompressedSparsityPattern.html">CompressedSparsityPattern</a></li><li class="navelem"><a class="el" href="structCompressedSparsityPattern_1_1Line.html">Line</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="structCompressedSparsityPattern_1_1Line-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CompressedSparsityPattern::Line Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af2587ca08e19ba63fbf6e4e025fdb383"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCompressedSparsityPattern_1_1Line.html#af2587ca08e19ba63fbf6e4e025fdb383">Line</a> ()</td></tr>
<tr class="separator:af2587ca08e19ba63fbf6e4e025fdb383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e1390e38224e490d496c4d21acfe320"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCompressedSparsityPattern_1_1Line.html#a7e1390e38224e490d496c4d21acfe320">add</a> (const <a class="el" href="classCompressedSparsityPattern.html#aa9fcc006be0a047cc5fbb4a3f7ed1c91">size_type</a> col_num)</td></tr>
<tr class="separator:a7e1390e38224e490d496c4d21acfe320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c1ede130bd053c75c5396ef56514e6"><td class="memTemplParams" colspan="2">template&lt;typename ForwardIterator &gt; </td></tr>
<tr class="memitem:ab4c1ede130bd053c75c5396ef56514e6"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structCompressedSparsityPattern_1_1Line.html#ab4c1ede130bd053c75c5396ef56514e6">add_entries</a> (ForwardIterator begin, ForwardIterator end, const <a class="el" href="classbool.html">bool</a> indices_are_sorted)</td></tr>
<tr class="separator:ab4c1ede130bd053c75c5396ef56514e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a760aceaf2aff293c2033e0a3357abafb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCompressedSparsityPattern_1_1Line.html#a760aceaf2aff293c2033e0a3357abafb">flush_cache</a> () const </td></tr>
<tr class="separator:a760aceaf2aff293c2033e0a3357abafb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:adae3e7e50ad0f262ada1fea50c6ade12"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classCompressedSparsityPattern.html#aa9fcc006be0a047cc5fbb4a3f7ed1c91">size_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCompressedSparsityPattern_1_1Line.html#adae3e7e50ad0f262ada1fea50c6ade12">entries</a></td></tr>
<tr class="separator:adae3e7e50ad0f262ada1fea50c6ade12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a334975c599cae2104dec56c8ab45e0c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCompressedSparsityPattern.html#aa9fcc006be0a047cc5fbb4a3f7ed1c91">size_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCompressedSparsityPattern_1_1Line.html#a334975c599cae2104dec56c8ab45e0c1">cache</a> [<a class="el" href="structCompressedSparsityPattern_1_1Line.html#a5ede8895192b057c5cc31c6fde9da0cc">cache_size</a>]</td></tr>
<tr class="separator:a334975c599cae2104dec56c8ab45e0c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae547d623b614c50806ad84764e38199e"><td class="memItemLeft" align="right" valign="top">unsigned <a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCompressedSparsityPattern_1_1Line.html#ae547d623b614c50806ad84764e38199e">cache_entries</a></td></tr>
<tr class="separator:ae547d623b614c50806ad84764e38199e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a5ede8895192b057c5cc31c6fde9da0cc"><td class="memItemLeft" align="right" valign="top">static const unsigned <a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCompressedSparsityPattern_1_1Line.html#a5ede8895192b057c5cc31c6fde9da0cc">cache_size</a> = 8</td></tr>
<tr class="separator:a5ede8895192b057c5cc31c6fde9da0cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Store some data for each row describing which entries of this row are nonzero. Data is organized as follows: if an entry is added to a row, it is first added to the <a class="el" href="structCompressedSparsityPattern_1_1Line.html#a334975c599cae2104dec56c8ab45e0c1">cache</a> variable, irrespective of whether an entry with same column number has already been added. Only if the cache is full do we flush it by removing duplicates, removing entries that are already stored in the <code>entries</code> array, sorting everything, and merging the two arrays.</p>
<p>The reasoning behind this scheme is that memory allocation is expensive, and we only want to do it when really necessary. Previously (in deal.II versions up to 5.0), we used to store the column indices inside a std::set, but this would allocate 20 bytes each time we added an entry. (A std::set based class has later been revived in form of the <a class="el" href="classCompressedSetSparsityPattern.html">CompressedSetSparsityPattern</a> class, as this turned out to be more efficient for hp finite element programs such as <a class="el" href="step_27.html">step-27</a>). Using the present scheme, we only need to allocate memory once for every 8 added entries, and we waste a lot less memory by not using a balanced tree for storing column indices.</p>
<p>Since some functions that are <code>const</code> need to access the data of this object, but need to flush caches before, the <a class="el" href="structCompressedSparsityPattern_1_1Line.html#a760aceaf2aff293c2033e0a3357abafb">flush_cache()</a> function is marked const, and the data members are marked <code>mutable</code>.</p>
<p>A small testseries about the size of the cache showed that the run time of a small program just testing the compressed sparsity pattern element insertion routine ran for 3.6 seconds with a cache size of 8, and 4.2 seconds with a cache size of 16. We deem even smaller cache sizes undesirable, since they lead to more memory allocations, while larger cache sizes lead to waste of memory. The original version of this class, with one std::set per row took 8.2 seconds on the same program. </p>

<p>Definition at line <a class="el" href="compressed__sparsity__pattern_8h_source.html#l00423">423</a> of file <a class="el" href="compressed__sparsity__pattern_8h_source.html">compressed_sparsity_pattern.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af2587ca08e19ba63fbf6e4e025fdb383"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CompressedSparsityPattern::Line::Line </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor. </p>

<p>Definition at line <a class="el" href="compressed__sparsity__pattern_8h_source.html#l00561">561</a> of file <a class="el" href="compressed__sparsity__pattern_8h_source.html">compressed_sparsity_pattern.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7e1390e38224e490d496c4d21acfe320"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CompressedSparsityPattern::Line::add </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCompressedSparsityPattern.html#aa9fcc006be0a047cc5fbb4a3f7ed1c91">size_type</a>&#160;</td>
          <td class="paramname"><em>col_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add the given column number to this line. </p>

<p>Definition at line <a class="el" href="compressed__sparsity__pattern_8h_source.html#l00493">493</a> of file <a class="el" href="compressed__sparsity__pattern_8h_source.html">compressed_sparsity_pattern.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab4c1ede130bd053c75c5396ef56514e6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ForwardIterator &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void CompressedSparsityPattern::Line::add_entries </td>
          <td>(</td>
          <td class="paramtype">ForwardIterator&#160;</td>
          <td class="paramname"><em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ForwardIterator&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>indices_are_sorted</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add the columns specified by the iterator range to this line. </p>

</div>
</div>
<a class="anchor" id="a760aceaf2aff293c2033e0a3357abafb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CompressedSparsityPattern::Line::flush_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flush the cache my merging it with the <a class="el" href="structCompressedSparsityPattern_1_1Line.html#adae3e7e50ad0f262ada1fea50c6ade12">entries</a> array. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a5ede8895192b057c5cc31c6fde9da0cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned <a class="el" href="classint.html">int</a> CompressedSparsityPattern::Line::cache_size = 8</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Size of the cache. </p>

<p>Definition at line <a class="el" href="compressed__sparsity__pattern_8h_source.html#l00429">429</a> of file <a class="el" href="compressed__sparsity__pattern_8h_source.html">compressed_sparsity_pattern.h</a>.</p>

</div>
</div>
<a class="anchor" id="adae3e7e50ad0f262ada1fea50c6ade12"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classCompressedSparsityPattern.html#aa9fcc006be0a047cc5fbb4a3f7ed1c91">size_type</a>&gt; CompressedSparsityPattern::Line::entries</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Storage for the column indices of this row, unless they are still in the cache. This array is always kept sorted. </p>

<p>Definition at line <a class="el" href="compressed__sparsity__pattern_8h_source.html#l00438">438</a> of file <a class="el" href="compressed__sparsity__pattern_8h_source.html">compressed_sparsity_pattern.h</a>.</p>

</div>
</div>
<a class="anchor" id="a334975c599cae2104dec56c8ab45e0c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCompressedSparsityPattern.html#aa9fcc006be0a047cc5fbb4a3f7ed1c91">size_type</a> CompressedSparsityPattern::Line::cache[<a class="el" href="structCompressedSparsityPattern_1_1Line.html#a5ede8895192b057c5cc31c6fde9da0cc">cache_size</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Cache of entries that have not yet been written to <a class="el" href="structCompressedSparsityPattern_1_1Line.html#adae3e7e50ad0f262ada1fea50c6ade12">entries</a>; </p>

<p>Definition at line <a class="el" href="compressed__sparsity__pattern_8h_source.html#l00444">444</a> of file <a class="el" href="compressed__sparsity__pattern_8h_source.html">compressed_sparsity_pattern.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae547d623b614c50806ad84764e38199e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classint.html">int</a> CompressedSparsityPattern::Line::cache_entries</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of entries in the cache. </p>

<p>Definition at line <a class="el" href="compressed__sparsity__pattern_8h_source.html#l00449">449</a> of file <a class="el" href="compressed__sparsity__pattern_8h_source.html">compressed_sparsity_pattern.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>include/deal.II/lac/<a class="el" href="compressed__sparsity__pattern_8h_source.html">compressed_sparsity_pattern.h</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 27 2014 15:27:16 for The deal.II Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
