<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>The deal.II Library: SparseVanka&lt; number &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link rel="SHORTCUT ICON" href="http://www.dealii.org/deal.ico"></link>
<meta name="author" content="The deal.II Authors <authors@dealii.org>"></meta>
<meta name="copyright" content="Copyright (C) 1998 - 2014 by the deal.II authors"></meta>
<meta name="deal.II-version" content="8.1.0"></meta>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo200.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">
   &#160;<span id="projectnumber">Reference documentation for deal.II version 8.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classSparseVanka-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SparseVanka&lt; number &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__Preconditioners.html">Preconditioners and Relaxation Operators</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for SparseVanka&lt; number &gt;:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classSparseVanka__inherit__graph.svg" width="211" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a7d7738c14dd62c48e05fb9eac839d1ad"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="namespacetypes.html#a3bf9e493f1aab00b04933b81856144c4">types::global_dof_index</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a></td></tr>
<tr class="separator:a7d7738c14dd62c48e05fb9eac839d1ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a217868edfde6f72a5df7ff5f2099a795"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a217868edfde6f72a5df7ff5f2099a795">SparseVanka</a> (const <a class="el" href="classSparseMatrix.html">SparseMatrix</a>&lt; number &gt; &amp;M, const std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; &amp;<a class="el" href="classSparseVanka.html#adc632a5520362456f351a45c725ec1ad">selected</a>, const <a class="el" href="classbool.html">bool</a> conserve_memory=false, const unsigned <a class="el" href="classint.html">int</a> <a class="el" href="classSparseVanka.html#a06feb6f661aaa8875fa2e732b130eb99">n_threads</a>=multithread_info.n_threads())</td></tr>
<tr class="separator:a217868edfde6f72a5df7ff5f2099a795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8efa61d88f54f6d6467c0c78b28a81b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a8efa61d88f54f6d6467c0c78b28a81b7">~SparseVanka</a> ()</td></tr>
<tr class="separator:a8efa61d88f54f6d6467c0c78b28a81b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace80149b19a3960fd1e342287ef5670f"><td class="memTemplParams" colspan="2">template&lt;typename number2 &gt; </td></tr>
<tr class="memitem:ace80149b19a3960fd1e342287ef5670f"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#ace80149b19a3960fd1e342287ef5670f">vmult</a> (<a class="el" href="classVector.html">Vector</a>&lt; number2 &gt; &amp;dst, const <a class="el" href="classVector.html">Vector</a>&lt; number2 &gt; &amp;src) const </td></tr>
<tr class="separator:ace80149b19a3960fd1e342287ef5670f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a54b8de8c9f87d62cedecc8b2a0e0f1e2"><td class="memTemplParams" colspan="2">template&lt;typename number2 &gt; </td></tr>
<tr class="memitem:a54b8de8c9f87d62cedecc8b2a0e0f1e2"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a54b8de8c9f87d62cedecc8b2a0e0f1e2">apply_preconditioner</a> (<a class="el" href="classVector.html">Vector</a>&lt; number2 &gt; &amp;dst, const <a class="el" href="classVector.html">Vector</a>&lt; number2 &gt; &amp;src, const std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; *const dof_mask=0) const </td></tr>
<tr class="separator:a54b8de8c9f87d62cedecc8b2a0e0f1e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e51111cd9ffb98a63db660a311f23cb"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a5e51111cd9ffb98a63db660a311f23cb">memory_consumption</a> () const </td></tr>
<tr class="separator:a5e51111cd9ffb98a63db660a311f23cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a22bf9cb75f1304f8623aa24c2c5bc6cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a22bf9cb75f1304f8623aa24c2c5bc6cf">compute_inverses</a> ()</td></tr>
<tr class="separator:a22bf9cb75f1304f8623aa24c2c5bc6cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68a3571b29d6b2068d66e4f950eeb2bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a68a3571b29d6b2068d66e4f950eeb2bb">compute_inverses</a> (const <a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a> begin, const <a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a> end)</td></tr>
<tr class="separator:a68a3571b29d6b2068d66e4f950eeb2bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aff37f288ae7f9900f6c22128cf8026"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a2aff37f288ae7f9900f6c22128cf8026">compute_inverse</a> (const <a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a> row, std::vector&lt; <a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a> &gt; &amp;local_indices)</td></tr>
<tr class="separator:a2aff37f288ae7f9900f6c22128cf8026"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1f0f7543cd4ec260491d303bcc981175"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSmartPointer.html">SmartPointer</a>&lt; const <br class="typebreak"/>
<a class="el" href="classSparseMatrix.html">SparseMatrix</a>&lt; number &gt;<br class="typebreak"/>
, <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a1f0f7543cd4ec260491d303bcc981175">matrix</a></td></tr>
<tr class="separator:a1f0f7543cd4ec260491d303bcc981175"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94a33d865ff7863386ef449d1e2f06ba"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a94a33d865ff7863386ef449d1e2f06ba">conserve_mem</a></td></tr>
<tr class="separator:a94a33d865ff7863386ef449d1e2f06ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc632a5520362456f351a45c725ec1ad"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#adc632a5520362456f351a45c725ec1ad">selected</a></td></tr>
<tr class="separator:adc632a5520362456f351a45c725ec1ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06feb6f661aaa8875fa2e732b130eb99"><td class="memItemLeft" align="right" valign="top">const unsigned <a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a06feb6f661aaa8875fa2e732b130eb99">n_threads</a></td></tr>
<tr class="separator:a06feb6f661aaa8875fa2e732b130eb99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65d35c500f0c764c668d132f6de8397e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classSmartPointer.html">SmartPointer</a><br class="typebreak"/>
&lt; <a class="el" href="classFullMatrix.html">FullMatrix</a>&lt; float &gt;<br class="typebreak"/>
, <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a65d35c500f0c764c668d132f6de8397e">inverses</a></td></tr>
<tr class="separator:a65d35c500f0c764c668d132f6de8397e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a124076b34c9c5c998b7d5b64ffb0cfc7"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a124076b34c9c5c998b7d5b64ffb0cfc7"><td class="memTemplItemLeft" align="right" valign="top">class&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classSparseVanka.html#a124076b34c9c5c998b7d5b64ffb0cfc7">SparseBlockVanka</a></td></tr>
<tr class="separator:a124076b34c9c5c998b7d5b64ffb0cfc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename number&gt;<br/>
class SparseVanka&lt; number &gt;</h3>

<p>Point-wise Vanka preconditioning. This class does Vanka preconditioning on a point-wise base. Vanka preconditioners are used for saddle point problems like Stoke's problem or problems arising in optimization where Lagrange multiplier occur and let Netwon's matrix have a zero block. With these matrices the application of Jacobi or Gauss-Seidel methods is impossible, because some diagonal elements are zero in the rows of the Lagrange multiplier. The approach of Vanka is to solve a small (usually indefinite) system of equations for each Langrange multiplie variable (we will also call the pressure in Stokes' equation a Langrange multiplier since it can be interpreted as such).</p>
<p>Objects of this class are constructed by passing a vector of indices of the degrees of freedom of the Lagrange multiplier. In the actual preconditioning method, these rows are traversed in the order in which the appear in the matrix. Since this is a Gau�-Seidel like procedure, remember to have a good ordering in advance (for transport dominated problems, Cuthill-McKee algorithms are a good means for this, if points on the inflow boundary are chosen as starting points for the renumbering).</p>
<p>For each selected degree of freedom, a local system of equations is built by the degree of freedom itself and all other values coupling immediately, i.e. the set of degrees of freedom considered for the local system of equations for degree of freedom <code>i</code> is <code>i</code> itself and all <code>j</code> such that the element <code>(i,j)</code> is a nonzero entry in the sparse matrix under consideration. The elements <code>(j,i)</code> are not considered. We now pick all matrix entries from rows and columns out of the set of degrees of freedom just described out of the global matrix and put it into a local matrix, which is subsequently inverted. This system may be of different size for each degree of freedom, depending for example on the local neighborhood of the respective node on a computational grid.</p>
<p>The right hand side is built up in the same way, i.e. by copying all entries that coupled with the one under present consideration, but it is augmented by all degrees of freedom coupling with the degrees from the set described above (i.e. the DoFs coupling second order to the present one). The reason for this is, that the local problems to be solved shall have Dirichlet boundary conditions on the second order coupling DoFs, so we have to take them into account but eliminate them before actually solving; this elimination is done by the modification of the right hand side, and in the end these degrees of freedom do not occur in the matrix and solution vector any more at all.</p>
<p>This local system is solved and the values are updated into the destination vector.</p>
<p>Remark: the Vanka method is a non-symmetric preconditioning method.</p>
<h3>Example of Use</h3>
<p>This little example is taken from a program doing parameter optimization. The Lagrange multiplier is the third component of the finite element used. The system is solved by the GMRES method. </p>
<div class="fragment"><div class="line">                    <span class="comment">// tag the Lagrange multiplier variable</span></div>
<div class="line">vector&lt;bool&gt; signature(3);</div>
<div class="line">signature[0] = signature[1] = <span class="keyword">false</span>;</div>
<div class="line">signature[2] = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// tag all dofs belonging to the</span></div>
<div class="line">                    <span class="comment">// Lagrange multiplier</span></div>
<div class="line">vector&lt;bool&gt; selected_dofs (dof.n_dofs(), <span class="keyword">false</span>);</div>
<div class="line"><a class="code" href="namespaceDoFTools.html#ac12e7f8dc1671065e2f0c87b1ed22d3d">DoFTools::extract_dofs</a>(dof, signature, p_select);</div>
<div class="line">                    <span class="comment">// create the Vanka object</span></div>
<div class="line"><a class="code" href="classSparseVanka.html">SparseVanka&lt;double&gt;</a> vanka (global_matrix, selected_dofs);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// create the solver</span></div>
<div class="line"><a class="code" href="classSolverGMRES.html">SolverGMRES&lt;PreconditionedSparseMatrix&lt;double&gt;</a>,</div>
<div class="line">            <a class="code" href="classVector.html">Vector&lt;double&gt;</a> &gt;    gmres(control,memory,504);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// solve</span></div>
<div class="line">gmres.solve (global_matrix, solution, right_hand_side,</div>
<div class="line">             vanka);</div>
</div><!-- fragment --><h4>Implementor's remark</h4>
<p>At present, the local matrices are built up such that the degree of freedom associated with the local Lagrange multiplier is the first one. Thus, usually the upper left entry in the local matrix is zero. It is not clear to me (W.B.) whether this might pose some problems in the inversion of the local matrices. Maybe someone would like to check this.</p>
<dl class="section note"><dt>Note</dt><dd>Instantiations for this template are provided for <code>&lt;float&gt; and &lt;double&gt;</code>; others can be generated in application programs (see the section on <a class="el" href="Instantiations.html">Template instantiations</a> in the manual).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Guido Kanschat, Wolfgang Bangerth; 1999, 2000 </dd></dl>

<p>Definition at line <a class="el" href="sparse__vanka_8h_source.html#l00035">35</a> of file <a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a7d7738c14dd62c48e05fb9eac839d1ad"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="namespacetypes.html#a3bf9e493f1aab00b04933b81856144c4">types::global_dof_index</a> <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::<a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Declare type for container size. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8h_source.html#l00140">140</a> of file <a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a217868edfde6f72a5df7ff5f2099a795"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">DEAL_II_NAMESPACE_OPEN <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::<a class="el" href="classSparseVanka.html">SparseVanka</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSparseMatrix.html">SparseMatrix</a>&lt; number &gt; &amp;&#160;</td>
          <td class="paramname"><em>M</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>selected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>conserve_memory</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned <a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>n_threads</em> = <code>multithread_info.n_threads()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor. Gets the matrix for preconditioning and a bit vector with entries <code>true</code> for all rows to be updated. A reference to this vector will be stored, so it must persist longer than the Vanka object. The same is true for the matrix.</p>
<p>The matrix <code>M</code> which is passed here may or may not be the same matrix for which this object shall act as preconditioner. In particular, it is conceivable that the preconditioner is build up for one matrix once, but is used for subsequent steps in a nonlinear process as well, where the matrix changes in each step slightly.</p>
<p>If <code>conserve_mem</code> is <code>false</code>, then the inverses of the local systems are computed now; if the flag is <code>true</code>, then they are computed every time the preconditioner is applied. This saves some memory, but makes preconditioning very slow. Note also, that if the flag is <code>false</code>, then the contents of the matrix <code>M</code> at the time of calling this constructor are used, while if the flag is <code>true</code>, then the values in <code>M</code> at the time of preconditioning are used. This may lead to different results, obviously, of <code>M</code> changes.</p>
<p>The parameter <code>n_threads</code> determines how many threads shall be used in parallel when building the inverses of the diagonal blocks. This parameter is ignored if not in multithreaded mode. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8templates_8h_source.html#l00034">34</a> of file <a class="el" href="sparse__vanka_8templates_8h_source.html">sparse_vanka.templates.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8efa61d88f54f6d6467c0c78b28a81b7"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::~<a class="el" href="classSparseVanka.html">SparseVanka</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor. Delete all allocated matrices. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8templates_8h_source.html#l00054">54</a> of file <a class="el" href="sparse__vanka_8templates_8h_source.html">sparse_vanka.templates.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ace80149b19a3960fd1e342287ef5670f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number &gt; </div>
<div class="memtemplate">
template&lt;typename number2 &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::vmult </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVector.html">Vector</a>&lt; number2 &gt; &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classVector.html">Vector</a>&lt; number2 &gt; &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Do the preconditioning. This function takes the residual in <code>src</code> and returns the resulting update vector in <code>dst</code>. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8templates_8h_source.html#l00185">185</a> of file <a class="el" href="sparse__vanka_8templates_8h_source.html">sparse_vanka.templates.h</a>.</p>

</div>
</div>
<a class="anchor" id="a54b8de8c9f87d62cedecc8b2a0e0f1e2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number &gt; </div>
<div class="memtemplate">
template&lt;typename number2 &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::apply_preconditioner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVector.html">Vector</a>&lt; number2 &gt; &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classVector.html">Vector</a>&lt; number2 &gt; &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; *const&#160;</td>
          <td class="paramname"><em>dof_mask</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Apply the inverses corresponding to those degrees of freedom that have a <code>true</code> value in <code>dof_mask</code>, to the <code>src</code> vector and move the result into <code>dst</code>. Actually, only values for allowed indices are written to <code>dst</code>, so the application of this function only does what is announced in the general documentation if the given mask sets all values to zero</p>
<p>The reason for providing the mask anyway is that in derived classes we may want to apply the preconditioner to parts of the matrix only, in order to parallelize the application. Then, it is important to only write to some slices of <code>dst</code>, in order to eliminate the dependencies of threads of each other.</p>
<p>If a null pointer is passed instead of a pointer to the <code>dof_mask</code> (as is the default value), then it is assumed that we shall work on all degrees of freedom. This is then equivalent to calling the function with a <code>vector&lt;bool&gt;(n_dofs,true)</code>.</p>
<p>The <code>vmult</code> of this class of course calls this function with a null pointer </p>

<p>Definition at line <a class="el" href="sparse__vanka_8templates_8h_source.html#l00200">200</a> of file <a class="el" href="sparse__vanka_8templates_8h_source.html">sparse_vanka.templates.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5e51111cd9ffb98a63db660a311f23cb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::memory_consumption </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine an estimate for the memory consumption (in bytes) of this object. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8templates_8h_source.html#l00357">357</a> of file <a class="el" href="sparse__vanka_8templates_8h_source.html">sparse_vanka.templates.h</a>.</p>

</div>
</div>
<a class="anchor" id="a22bf9cb75f1304f8623aa24c2c5bc6cf"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::compute_inverses </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compute the inverses of all selected diagonal elements. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8templates_8h_source.html#l00068">68</a> of file <a class="el" href="sparse__vanka_8templates_8h_source.html">sparse_vanka.templates.h</a>.</p>

</div>
</div>
<a class="anchor" id="a68a3571b29d6b2068d66e4f950eeb2bb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::compute_inverses </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a>&#160;</td>
          <td class="paramname"><em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a>&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compute the inverses at positions in the range <code>[begin,end)</code>. In non-multithreaded mode, <code><a class="el" href="classSparseVanka.html#a22bf9cb75f1304f8623aa24c2c5bc6cf">compute_inverses()</a></code> calls this function with the whole range, but in multithreaded mode, several copies of this function are spawned. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8templates_8h_source.html#l00134">134</a> of file <a class="el" href="sparse__vanka_8templates_8h_source.html">sparse_vanka.templates.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2aff37f288ae7f9900f6c22128cf8026"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::compute_inverse </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a>&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classSparseVanka.html#a7d7738c14dd62c48e05fb9eac839d1ad">size_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>local_indices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compute the inverse of the block located at position <code>row</code>. Since the vector is used quite often, it is generated only once in the caller of this function and passed to this function which first clears it. Reusing the vector makes the process significantly faster than in the case where this function re-creates it each time. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8templates_8h_source.html#l00153">153</a> of file <a class="el" href="sparse__vanka_8templates_8h_source.html">sparse_vanka.templates.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a124076b34c9c5c998b7d5b64ffb0cfc7"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number&gt; </div>
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classSparseBlockVanka.html">SparseBlockVanka</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Make the derived class a friend. This seems silly, but is actually necessary, since derived classes can only access non-public members through their <code>this</code> pointer, but not access these members as member functions of other objects of the type of this base class (i.e. like <code>x.f()</code>, where <code>x</code> is an object of the base class, and <code>f</code> one of it's non-public member functions).</p>
<p>Now, in the case of the <code><a class="el" href="classSparseBlockVanka.html">SparseBlockVanka</a></code> class, we would like to take the address of a function of the base class in order to call it through the multithreading framework, so the derived class has to be a friend. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8h_source.html#l00364">364</a> of file <a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a1f0f7543cd4ec260491d303bcc981175"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSmartPointer.html">SmartPointer</a>&lt;const <a class="el" href="classSparseMatrix.html">SparseMatrix</a>&lt;number&gt;,<a class="el" href="classSparseVanka.html">SparseVanka</a>&lt;number&gt; &gt; <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::matrix</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pointer to the matrix. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8h_source.html#l00273">273</a> of file <a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a>.</p>

</div>
</div>
<a class="anchor" id="a94a33d865ff7863386ef449d1e2f06ba"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbool.html">bool</a> <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::conserve_mem</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Conserve memory flag. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8h_source.html#l00278">278</a> of file <a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a>.</p>

</div>
</div>
<a class="anchor" id="adc632a5520362456f351a45c725ec1ad"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;<a class="el" href="classbool.html">bool</a>&gt;&amp; <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::selected</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Indices of those degrees of freedom that we shall work on. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8h_source.html#l00284">284</a> of file <a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a>.</p>

</div>
</div>
<a class="anchor" id="a06feb6f661aaa8875fa2e732b130eb99"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned <a class="el" href="classint.html">int</a> <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::n_threads</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of threads to be used when building the inverses. Only relevant in multithreaded mode. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8h_source.html#l00292">292</a> of file <a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a>.</p>

</div>
</div>
<a class="anchor" id="a65d35c500f0c764c668d132f6de8397e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename number&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classSmartPointer.html">SmartPointer</a>&lt;<a class="el" href="classFullMatrix.html">FullMatrix</a>&lt;float&gt;,<a class="el" href="classSparseVanka.html">SparseVanka</a>&lt;number&gt; &gt; &gt; <a class="el" href="classSparseVanka.html">SparseVanka</a>&lt; number &gt;::inverses</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array of inverse matrices, one for each degree of freedom. Only those elements will be used that are tagged in <code>selected</code>. </p>

<p>Definition at line <a class="el" href="sparse__vanka_8h_source.html#l00300">300</a> of file <a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/deal.II/lac/<a class="el" href="sparse__vanka_8h_source.html">sparse_vanka.h</a></li>
<li>include/deal.II/lac/<a class="el" href="sparse__vanka_8templates_8h_source.html">sparse_vanka.templates.h</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 27 2014 15:27:21 for The deal.II Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
