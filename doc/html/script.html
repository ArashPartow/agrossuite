<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="description" lang="en" content="Documentation for Agros 2D.">  
  <meta name="keywords" lang="en" content="hpFEM, hp-FEM, hp,FEM, finite element method">
  <title>Agros 2D - hp-FEM multiphysics solver based on Hermes2D library</title>

  <link rel="stylesheet" type="text/css" href="./styles/default_style.css" media="screen, projection" title="Default">
</head>
<body lang="en">
<div id="header">
  <div class="superHeader">&nbsp;</div>
  <div class="midHeader">
    <div class="headerUNRLogo doNotPrint"><img src="./images/unr_logo.jpg" alt="UNR Logo"></div>
    <div class="headerITLogo doNotPrint"><img src="./images/agros2d_logo.png" alt="Agros 2D logo"></div>
    <div class="midHeaderBody">
      <div class="headerTitle">Agros 2D</div>
      <div class="headerSubTitle">University of Nevada, Reno</div>
      <div class="headerSubTitle">University of West Bohemia, Pilsen</div>
    </div>
  </div>
  <div class="subHeader">
    <div class="menu">
      <a href="./index.html">Main</a> |
      <a href="./script.html">Script manual</a> |
      <a href="./screenshots.html">Screenshots</a> |
      <a href="./examples.html">Examples</a>
    </div>
  </div>
</div>
<div id="main-copy">
<h1>Script manual</h1>
QtScript is based on the ECMAScript scripting language.

<h2>Reference documentation</h2>
<h4>newDocument(name, type, physicfield, numberofrefinements, polynomialorder, adaptivitysteps, adaptivitytolerance)</h4>
Create new document.

<h4>openDocument(filename)</h4>
Open document.

<h4>saveDocument(filename)</h4>
Save document.

<h4>addNode(x, y)</h4>

<h4>addLabel(x, y, area, marker)</h4>

<h4>addEdge(x1, y1, x2, y2, angle, marker)</h4>

<h4>addBoundary(name, type, value, ...)</h4>
Add boundary marker.
<ul>
  <li>
    <h5>Electrostatic</h5>
    addBoundary(name, type = {"potential", "surface_charge_density"}, value)
  </li>
  <li>
    <h5>Magnetostatic</h5>
    addBoundary(name, type = {"vector_potential", "surface_current_density"}, value)
  </li>
  <li>
    <h5>Heat transfer</h5>
    addBoundary(name, type = "temperature", temperature)<br>
    addBoundary(name, type = "heat_flux", heat_flux, h, external_temperature)
  </li>
  <li>
    <h5>Current field</h5>
    addBoundary(name, type = {"potential", "inward_current_flow"}, value)
  </li>
</ul>

<h4>addMaterial(name, type, value, ...)</h4>
Add label marker.
<ul>
  <li>
    <h5>Electrostatic</h5>
    addMaterial(name, charge_density, permittivity)
  </li>
  <li>
    <h5>Magnetostatic</h5>
    addBoundary(name, current_density, double permeability)
  </li>
  <li>
    <h5>Heat transfer</h5>
    addBoundary(name, volume_heat, thermal_conductivity)
  </li>
  <li>
    <h5>Current field</h5>
    addBoundary(name, conductivity)
  </li>
</ul>

<h4>solve()</h4>
Solve problem.

<h4>zoomBestFit()</h4>
Zoom best fit.

<h4>mode(mode = {"node", "edge", "label", "postprocessor"})</h4>
Set mode.

<h4>selectNone()</h4>
Unselect objects.

<h4>selectAll()</h4>
Select all objects.

<h4>selectNode(index, ...)</h4>
Select nodes with given index.

<h4>selectEdge(index, ...)</h4>
Select edges with given index.

<h4>selectLabel(index, ...)</h4>
Select labels with given index.

<h4>moveSelection(dx, dy, copy = false)</h4>
Move selected objects.

<h4>rotateSelection(x, y, angle, copy = false)</h4>
Rotate selected objects.

<h4>scaleSelection(x, y, scale, copy = false)</h4>
Scale selected objects.

<h4>result = pointResult(x, y)</h4>
Local variables at point [x, y].
<ul>
  <li>
    <h5>Electrostatic</h5>
    Properties: Potential, Ex, Ey, E, Dx, Dy, Energy, Permittivity.
  </li>
  <li>
    <h5>Magnetostatic</h5>
    Properties: Potential, Bx, By, B, Hx, Hy, H, Energy, Permeability.
  </li>
  <li>
    <h5>Heat transfer</h5>
    Properties: Temperature, Gx, Gy, G, Fx, Fy, F, Conductivity.
  </li>
  <li>
    <h5>Current field</h5>
    Properties: Potential, Jx, Jy, J, Ex, Ey, E, Losses, Conductivity.
  </li>
</ul>

<h5>Example:</h5>
<pre>
// local point result
result = pointResult(0.03, 0.03);
print("Potential = " + result.Potential);
</pre>

<h4>integral = volumeIntegral(index, ...)</h4>
Volume integral in areas with given index.
<ul>
  <li>
    <h5>Electrostatic</h5>
    Properties: Volume, CrossSection, Ex_avg, Ey_avg, E_avg, Dx_avg, Dy_avg, D_avg, Energy.
  </li>
  <li>
    <h5>Magnetostatic</h5>
    Properties: Volume, CrossSection, Bx_avg, By_avg, B_avg, Hx_avg, Hy_avg, H_avg, Energy.    
  </li>
  <li>
    <h5>Heat transfer</h5>
    Properties: Volume, CrossSection, Temperature, Gx_avg, Gy_avg, G_avg, Fx_avg, Fy_avg, F_avg.
  </li>
  <li>
    <h5>Current field</h5>
    Properties: Volume, CrossSection, Jx_avg, Jy_avg, J_avg, Ex_avg, Ey_avg, E_avg, Losses.
  </li>
</ul>

<h5>Example:</h5>
<pre>
// volume integral
integral = volumeIntegral(0, 1);
print("Volume = " + integral.Volume);
</pre>

<h2>Examples</h2>
<h3>Capacitor</h3>
<pre class="code">
// model
newDocument("Electrostatic 2D", "axisymmetric", "electrostatic", 1, 2, 0, 0)

// boundaries
addBoundary("U = 1 V", "potential", 1)
addBoundary("U = 0 V", "potential", 0)
addBoundary("neumann", "surface_charge_density", 0)

// materials
addMaterial("air", 0, 1)
addMaterial("diel 1", 0, 10)
addMaterial("diel 2", 0, 3)

// edges
addEdge(0, 0.2, 0, 0.08, 0, "neumann")
addEdge(0.01, 0.08, 0.01, 0, 0, "U = 1 V")
addEdge(0.01, 0, 0.03, 0, 0, "neumann")
addEdge(0.03, 0, 0.03, 0.08, 0, "none")
addEdge(0.03, 0.08, 0.05, 0.08, 0, "none")
addEdge(0.05, 0, 0.03, 0, 0, "neumann")
addEdge(0.05, 0.08, 0.05, 0, 0, "U = 0 V")
addEdge(0.06, 0, 0.06, 0.08, 0, "U = 0 V")
addEdge(0.05, 0.08, 0.06, 0.08, 0, "U = 0 V")
addEdge(0.06, 0, 0.2, 0, 0, "neumann")
addEdge(0.2, 0, 0, 0.2, 90, "neumann")
addEdge(0.01, 0.08, 0.03, 0.08, 0, "none")
addEdge(0.01, 0.08, 0, 0.08, 0, "U = 1 V")

// labels
addLabel(0.019, 0.021, 0, "diel 1")
addLabel(0.0379, 0.051, 0, "diel 2")
addLabel(0.0284191, 0.123601, 0, "air")

// capacitance
print("Capacitance:");
var dx = 0.01;
var i = 0;
do
{
  // move edges
  if (i > 0)
  {
    selectNone();	
    selectEdge(6, 7, 8);
    moveSelection(dx, 0);	
  }

  solve();
  integral = volumeIntegral();
  print((2*2*integral.Energy)/(1^2));

  i++;
} while (i<5);
</pre>
<div style="clear: both;">&nbsp;</div>
</div>
<div id="footer">
  <span>Send any inquiries to <a href="mailto:pkarban%28at%29gmail%28dot%29com" title="E-mail address"> Pavel Karban</a></span>
</div>
</body>
</html>
